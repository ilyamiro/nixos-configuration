/* --- COLORS (Catppuccin Mocha) --- */
$rosewater: #f5e0dc;
$flamingo: #f2cdcd;
$pink: #f5c2e7;
$mauve: #cba6f7;
$red: #f38ba8;
$maroon: #eba0ac;
$peach: #fab387;
$yellow: #f9e2af;
$green: #a6e3a1;
$teal: #94e2d5;
$sky: #89dceb;
$sapphire: #74c7ec;
$blue: #89b4fa;
$lavender: #b4befe;
$text: #cdd6f4;
$subtext1: #bac2de;
$subtext0: #a6adc8;
$overlay2: #9399b2;
$overlay1: #7f849c;
$overlay0: #6c7086;
$surface2: #585b70;
$surface1: #45475a;
$surface0: #313244;
$base: #1e1e2e;
$mantle: #181825;
$crust: #11111b;

/* --- GLOBAL DEFAULTS --- */
* {
  all: unset;
  font-family: "JetBrains Mono", "Iosevka Nerd Font", monospace;
}

/* --- ANIMATIONS --- */
@keyframes gradient-move {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

@keyframes vinyl_energy {
    0%   { box-shadow: 0 0 0 0 rgba(203, 166, 247, 0); }
    15%  { box-shadow: 0 0 20px 5px rgba(203, 166, 247, 0.4); } 
    30%  { box-shadow: 0 0 10px 5px rgba(180, 190, 254, 0.2); }  
    45%  { box-shadow: 0 0 20px 10px rgba(137, 180, 250, 0.5); } 
    100% { box-shadow: 0 0 0 0 rgba(180, 190, 254, 0); }
}

@keyframes liquid_energy {
    0% { background-position: 0% 50%; }
    100% { background-position: 200% 50%; }
}

@keyframes complex_heartbeat {
    0%   { box-shadow: 0px 0px 0px 0px rgba(180, 190, 254, 0); }
    15%  { box-shadow: 0px 0px 8px 2px rgba(203, 166, 247, 0.6); } 
    30%  { box-shadow: 0px 0px 4px 1px rgba(180, 190, 254, 0.4); } 
    45%  { box-shadow: 0px 0px 12px 4px rgba(203, 166, 247, 0.8); } 
    100% { box-shadow: 0px 0px 0px 0px rgba(180, 190, 254, 0); }
}

/* Subtle breathe for text */
@keyframes breathe {
    0% { color: $mauve; text-shadow: 0 0 0 rgba(0,0,0,0); }
    50% { color: $pink; text-shadow: 0 0 5px rgba(203, 166, 247, 0.4); }
    100% { color: $mauve; text-shadow: 0 0 0 rgba(0,0,0,0); }
}

@keyframes pulse-red {
    0% { box-shadow: 0 0 0 0 rgba(243, 139, 168, 0.4); }
    70% { box-shadow: 0 0 0 6px rgba(243, 139, 168, 0); }
    100% { box-shadow: 0 0 0 0 rgba(243, 139, 168, 0); }
}

@keyframes blink {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
}

/* --- BAR WIDGETS --- */
.bar_class {
  background-color: transparent;
}

/* The "Alive" Container Style */
.dockbox {
  background-color: rgba(30, 30, 46, 0.85); 
  border: 1px solid rgba(255, 255, 255, 0.05); 
  border-radius: 12px; 
  padding: 4px 10px; 
  margin: 2px 2px; /* Reduced gaps */
  color: $text;
  
  /* Reduced shadow intensity for less "glow" */
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2);
  
  transition: all 0.2s ease;
}

.dockbox:hover {
    background-color: $surface0;
    /* Clean lift effect, no neon glow */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    border-color: $overlay0;
}

/* Search Icon */
.genicon {
  background-repeat: no-repeat;
  background-size: 18px;
  background-position: center;
  min-height: 24px;
  min-width: 24px;
  border-radius: 8px;
  transition: all 0.3s;
}
.genicon:hover {
    background-color: $surface1;
    /* Much subtler hover glow */
    box-shadow: 0 0 5px rgba(205, 214, 244, 0.2); 
}

/* Workspace */
.workspace-btn {
    font-family: "JetBrains Mono ExtraBold";
    font-size: 14px;
    
    /* Uniform pill sizing */
    min-width: 24px;
    min-height: 24px;
    padding: 2px 4px;
    margin: 0px 3px;
    border-radius: 8px; /* Matches your other system pills */
    
    /* Clean transition, no "bounce" */
    transition: all 0.2s ease-in-out;
    
    /* REMOVED: All borders and shadows for true minimalism */
    border: none;
    box-shadow: none;
}

/* 1. EMPTY State (Subtle) */
/* Just the number, very dimmed, blending into the dockbox */
.workspace-btn.empty {
    color: $surface2; 
    background-color: transparent;
}

.workspace-btn.empty:hover {
    color: $overlay1;
    background-color: rgba(255, 255, 255, 0.05);
}

/* 2. OCCUPIED State (Clean Pill) */
/* Uses a flat dark background to indicate presence without shouting */
.workspace-btn.occupied {
    color: $blue;
    background-color: $surface1; 
}

.workspace-btn.occupied:hover {
    background-color: $surface2;
    color: $sapphire;
}

/* 3. ACTIVE State (Vibrant Accent) */
/* Solid block color, dark text for maximum contrast. No glowing borders. */
.workspace-btn.active {
    color: $base; /* Dark text on bright background */
    background-color: $mauve;
    font-weight: 900;
}

.workspace-btn.active:hover {
    background-color: $pink; /* Simple color shift */
}/* Time & Weather */
.clockbox { margin-right: 15px; }
.time { 
    font-size: 15px; 
    font-weight: 900; 
    color: $blue;
    /* Reduced text shadow */
    text-shadow: 0 0 2px rgba(137, 180, 250, 0.3); 
    transition: color 0.3s;
}
.clockbox:hover .time { color: $sky; }

.date { font-size: 11px; font-weight: bold; color: $subtext0; }

.weatherbox { margin-left: 0px; }
.weathericon { 
    font-family: "Iosevka Nerd Font"; 
    font-size: 24px; 
    color: $yellow; 
    margin-right: 8px;
    transition: color 0.3s;
}
.weatherbox:hover .weathericon {
    color: $peach;
}
.weathertemp { font-size: 16px; font-weight: 800; color: $peach; }

/* Bar Media Widget */
.album_art {
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  min-height: 32px;
  min-width: 32px;
  border-radius: 8px;
  background-color: $surface1;
  border: 1px solid $surface1;
  transition: all 0.3s;
}

/* Keep the playing glow but make it slightly cleaner */
.bar-media-playing .album_art {
     animation: vinyl_energy 5s ease-in-out infinite;
     border-color: $mauve;
}

.song_title { font-weight: 800; font-size: 13px; color: $sapphire; }
.song_time_bar { font-family: "JetBrains Mono"; font-weight: 800; font-size: 11px; color: $overlay1; }

.media_btn, .media_btn_play {
  font-family: "Iosevka Nerd Font";
  font-size: 20px;
  color: $overlay2;
  padding: 0px 4px;
  border-radius: 50%;
  transition: all 0.2s;
}

.media_btn:hover { color: $lavender; background-color: $surface1; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
.media_btn_play { color: $text; font-size: 24px; }
.media_btn_play:hover { color: $green; text-shadow: 0 0 5px rgba(166, 227, 161, 0.5); }

/* --- SYSTEM WIDGET (Glass & Smooth Animation) --- */
.system-widget {
  /* Main Container Background */
  background-image: linear-gradient(to bottom right, rgba(30, 30, 46, 0.95), rgba(24, 24, 37, 0.85));
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 24px;
  padding: 6px 8px; /* Slightly tighter outer padding */
  margin: 0px 4px;
  color: $text;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

/* Base Pill Style - Applies to ALL (Battery, Sound, Wifi, etc.) */
.sys-pill {
  /* Default subtle glass background for everything */
  background-color: rgba(255, 255, 255, 0.04);
  padding: 6px 14px; /* Bigger padding */
  border-radius: 18px; /* Smoother radius */
  
  /* Smooth animation engine */
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 24px;
  border: 1px solid transparent;
}

/* Hover Animation for ALL pills */
.sys-pill:hover {
  background-color: $surface1;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  border-color: rgba(255, 255, 255, 0.1);
}

/* Text Styles */
.sys-text {
  font-family: "JetBrains Mono";
  font-weight: 800;
  font-size: 13px;
  margin-top: 1px;
}

/* Icons Generic */
.sys-icon-kb, .sys-icon-wifi, .sys-icon-bt, .sys-icon-vol, .sys-icon-bat {
  font-family: "Iosevka Nerd Font";
  font-size: 18px; /* Slightly larger icons */
}

/* --- SPECIFIC MODULE CONFIG --- */

/* 1. Keyboard */
.sys-kb { color: $overlay2; }
.sys-kb:hover { color: $text; }

/* 2. WiFi */
.sys-wifi {
    color: $subtext0;
    min-width: 80px; /* Force it to be longer */
}
/* WiFi Active: Solid Blue Gradient Pill */
.sys-wifi.active {
    background-image: linear-gradient(135deg, $blue, $sapphire);
    color: $crust;
    box-shadow: 0 0 15px rgba(137, 180, 250, 0.3);
    border: none;
}
.sys-wifi.active:hover {
    box-shadow: 0 0 20px rgba(137, 180, 250, 0.5);
}
.sys-wifi.active .sys-icon-wifi { color: $crust; }

/* 3. Bluetooth */
.sys-bt {
    color: $subtext0;
    min-width: 80px; /* Force it to be longer */
}
/* Bluetooth Active: Solid Mauve Gradient Pill */
.sys-bt.active {
    background-image: linear-gradient(135deg, $mauve, $pink);
    color: $crust;
    box-shadow: 0 0 15px rgba(203, 166, 247, 0.3);
    border: none;
}
.sys-bt.active:hover {
    box-shadow: 0 0 20px rgba(203, 166, 247, 0.5);
}
.sys-bt.active .sys-icon-bt { color: $crust; }

/* 4. Volume */
.sys-vol { color: $peach; }
.sys-vol:hover { color: $rosewater; }
.sys-vol.muted {
    color: $overlay0;
    background-color: rgba(0,0,0,0.2); /* Darker background when muted */
    text-decoration: line-through;
}

/* 5. Battery */
.sys-bat { color: $green; }
.sys-icon-bat.low {
    color: $red;
    animation: blink 2s infinite;
}

/* --- MUSIC POPUP WINDOW (UNTOUCHED) --- */
.music-window-box {
    background-color: $base;
    border-radius: 12px;
    transition: border-color 0.5s ease;
}

.animated-gradient-border {
    background-size: 300% 300%;
    animation: gradient-move 5s ease infinite;
    border-radius: 14px;
}

.music-bg-blur {
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    min-width: 700px;
    min-height: 620px;
    opacity: 0.6; 
    border-radius: 10px; 
}

.music-content {
    padding: 20px;
    border-radius: 12px;
}

.music-cover-art {
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    border-radius: 50%;
    border: 4px solid $surface1;
    box-shadow: inset 0 0 0 20px rgba(0,0,0,0.4);
    transition: all 0.3s ease;
}

.music-cover-art.playing {
    border-color: $mauve;
    animation: vinyl_energy 4s ease-in-out infinite;
}

.music-cover-art.paused {
    border-color: $overlay0;
    opacity: 0.7;
    animation: none;
}

.music-title { font-weight: 900; font-size: 20px; color: $lavender; }
.music-artist { font-weight: 700; font-size: 14px; color: $pink; }

.meta-pill {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    padding: 4px 10px;
}
.meta-icon { font-family: "Iosevka Nerd Font"; color: $mauve; font-size: 14px; }
.meta-text { font-family: "JetBrains Mono"; font-weight: 800; font-size: 12px; color: $overlay2; }
.music-source { font-size: 12px; color: $yellow; font-weight: bold; font-style: italic; margin-top: 2px; }

.music-progress-area { margin-top: 10px; margin-bottom: 5px; }
.music-time { font-size: 13px; font-weight: bold; color: $overlay2; margin-top: 5px; }

scale trough {
    background-color: $surface0;
    border-radius: 10px;
    min-height: 8px;
}
scale highlight {
    background-color: $blue;
    border-radius: 10px;
}

.music-progress-bar trough {
    all: unset;
    background-color: rgba(17, 17, 27, 0.6); 
    border-radius: 99px; 
    min-height: 8px;      
    min-width: 100px;
    margin-bottom: 5px; 
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.music-progress-bar highlight {
    all: unset;
    background-image: linear-gradient(90deg, $blue, $mauve, $text, $sapphire, $blue);
    background-size: 300% 100%;
    animation: liquid_energy 3s linear infinite;
    border-radius: 99px;
    min-height: 8px; 
    transition: all 0.5s ease;
}

.music-progress-bar:hover highlight { animation-duration: 1.5s; opacity: 0.8; }

.music-progress-bar slider {
    all: unset;
    background-color: $text; 
    min-height: 14px;
    min-width: 14px;
    border-radius: 50%;
    margin-left: -7px;
    transition: box-shadow 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
    box-shadow: none;
}

.music-progress-bar.playing slider { animation: complex_heartbeat 4s ease-in-out infinite; }
.music-progress-bar slider:hover { animation: none; box-shadow: 0px 0px 0px 3px $text, 0px 0px 15px 5px $lavender; }
.music-progress-bar slider:active { animation: none; box-shadow: 0px 0px 0px 5px $text, 0px 0px 25px 8px $blue; }

.music-progress-bar highlight { animation-play-state: paused; }
.music-progress-bar.playing highlight { animation-play-state: running; }

.ctrl-btn { font-family: "Iosevka Nerd Font"; font-size: 24px; color: $overlay2; }
.ctrl-btn:hover { color: $text; }
.play-btn-big { font-family: "Iosevka Nerd Font"; font-size: 42px; color: $mauve; }
.play-btn-big:hover { color: $pink; }

.music-sep-h {
    background-color: rgba(255, 255, 255, 0.1);
    margin: 20px 10px; 
    min-height: 2px;
    border-radius: 99px;
}

/* --- EQUALIZER STYLING --- */
.eq-container { padding: 0px 10px; }
.eq-header { font-weight: 900; font-size: 16px; color: $mauve; }
.eq-preset-name { font-weight: bold; font-size: 14px; color: $subtext0; }

.eq-scale trough {
    background-color: rgba(17, 17, 27, 0.6);
    border-radius: 99px;
    min-width: 6px; 
    min-height: 150px;
    margin-bottom: 5px;
    box-shadow: inset 0 0 5px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.4);
}

.eq-scale highlight {
    background-color: $blue; 
    border-radius: 99px;
    min-width: 6px;
    transition: all 0.1s ease;
}

.eq-scale slider {
    background-color: $text;
    min-height: 14px;
    min-width: 14px;
    border-radius: 50%;
    margin-left: 0px; 
    margin-bottom: -4px;
    box-shadow: 0 0 3px rgba(0,0,0,0.5); 
}

.eq-band-label { font-size: 10px; font-weight: bold; color: $overlay1; }

.eq-preset-btn {
    background-color: rgba(30, 30, 46, 0.75);
    color: $subtext0;
    padding: 8px 0px;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 800;
    border: 1px solid transparent; 
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.eq-preset-btn:hover {
    background-color: $surface1;
    color: $text;
    border-color: $overlay0;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5); 
}

.eq-preset-btn.active {
    background-color: $mauve;
    color: $base;
    border-color: $mauve;
    box-shadow: 0 0 15px rgba(203, 166, 247, 0.5); 
}

.eq-preset-btn.active:hover { box-shadow: 0 0 20px rgba(203, 166, 247, 0.7); }

.eq-apply-btn {
    background-color: transparent;
    color: $overlay1;
    font-weight: bold;
    font-size: 11px;
    border-radius: 6px;
    padding: 2px 10px;
    border: 1px solid transparent;
    transition: all 0.3s;
}

.eq-apply-btn.highlight {
    background-color: rgba(243, 139, 168, 0.1); 
    color: $red;
    border: 1px solid $red;
    box-shadow: 0 0 8px rgba(243, 139, 168, 0.2);
    animation: pulse-red 2s infinite;
}

.eq-apply-btn:hover { color: $text; background-color: $surface0; }
.eq-apply-btn.highlight:hover { background-color: $red; color: $base; }
.eq-apply-btn:active { background-color: $surface1; }

/* --- BLUETOOTH POPUP SCSS --- */

.bt-window {
    background-color: rgba(30, 30, 46, 0.98);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 24px;
    padding: 0;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
}

/* --- LEFT COLUMN --- */
.bt-left-col {
    padding: 25px;
    background-color: rgba(0,0,0,0.2);
    border-top-left-radius: 24px;
    border-bottom-left-radius: 24px;
}

.bt-header-box { margin-bottom: 5px; }
.bt-title {
    font-family: "JetBrains Mono";
    font-weight: 900;
    font-size: 24px;
    color: $mauve;
    /* Removed letter-spacing */
}

/* ICON TOGGLE SWITCH */
.bt-toggle-switch {
    font-family: "Iosevka Nerd Font";
    font-size: 28px;
    padding: 0px; 
    background-color: transparent;
    border: none;
    box-shadow: none;
    transition: all 0.3s;
}

.bt-toggle-switch.on {
    color: $green;
    text-shadow: 0 0 10px rgba(166, 227, 161, 0.4);
}

.bt-toggle-switch.off {
    color: $overlay1;
}
.bt-toggle-switch.off:hover { color: $red; }


.bt-status-text {
    font-size: 11px;
    color: $overlay1;
    font-style: italic;
    margin-bottom: 25px;
}

/* Connected Hero Card */
.bt-connected-hero {
    background-color: $surface0;
    border-radius: 18px;
    padding: 20px;
    border: 1px dashed $overlay0;
    transition: all 0.3s;
}

.bt-connected-hero.active {
    background-image: linear-gradient(135deg, rgba(203, 166, 247, 0.15), rgba(137, 180, 250, 0.15));
    border: 1px solid $mauve;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
}

.bt-hero-icon { font-size: 48px; color: $blue; margin-bottom: 5px; }
.bt-hero-name { font-weight: 800; font-size: 16px; color: $text; }
.bt-hero-bat  { font-weight: bold; font-size: 12px; color: $green; margin-top: 2px;}

.bt-hero-disconnect {
    background-color: rgba(243, 139, 168, 0.1);
    color: $red;
    font-weight: 800;
    font-size: 11px;
    padding: 6px 15px;
    border-radius: 8px;
    margin-top: 15px;
    transition: 0.2s;
}
.bt-hero-disconnect:hover { background-color: $red; color: $base; }

.bt-hero-placeholder {
    color: $overlay0;
    font-weight: bold;
    font-size: 14px;
}

.bt-settings-link {
    color: $subtext0;
    font-size: 12px;
    font-weight: bold;
    margin-top: 15px;
}
.bt-settings-link:hover { color: $text; text-decoration: underline; }

/* --- SEPARATOR --- */
.bt-separator-v {
    background-color: $surface0;
    margin: 25px 0;
}

/* --- RIGHT COLUMN --- */
.bt-right-col {
    padding: 25px;
}

.bt-list-header {
    font-weight: 800;
    font-size: 14px;
    color: $subtext1;
    margin-bottom: 15px;
}

.bt-scroll-area { }

/* List Items */
.bt-item {
    background-color: transparent;
    border-radius: 12px;
    padding: 8px 10px;
    transition: all 0.2s;
    border: 1px solid transparent;
}
.bt-item:hover {
    background-color: $surface0;
    border-color: rgba(255,255,255,0.05);
}

.bt-item-icon { font-size: 18px; color: $lavender; }
.bt-item-name { font-weight: 700; font-size: 13px; color: $text; }
.bt-item-mac  { font-family: "JetBrains Mono"; font-size: 10px; color: $overlay0; }

.bt-item-btn {
    font-weight: 800;
    font-size: 11px;
    padding: 4px 12px;
    border-radius: 6px;
    background-color: $surface1;
    color: $blue;
    transition: 0.2s;
}
.bt-item-btn:hover {
    background-color: $blue;
    color: $base;
    box-shadow: 0 2px 8px rgba(137, 180, 250, 0.4);
}

.bt-empty-list {
    color: $overlay0;
    font-style: italic;
    font-size: 13px;
    margin-top: 20px;
}
