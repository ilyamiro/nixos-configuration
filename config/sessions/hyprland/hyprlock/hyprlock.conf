# /etc/nixos/config/programs/hyprlock/hyprlock.conf
# Enhanced Catppuccin Mocha themed lock screen with modern features

# ============================================================================
# CATPPUCCIN MOCHA COLOR PALETTE
# ============================================================================
$base       = rgb(30, 30, 46)      # Background
$mantle     = rgb(24, 24, 37)      # Darker background
$crust      = rgb(17, 17, 27)      # Darkest background
$text       = rgb(205, 214, 244)   # Primary text
$subtext1   = rgb(186, 194, 222)   # Secondary text
$subtext0   = rgb(166, 173, 200)   # Tertiary text
$overlay0   = rgb(108, 112, 134)   # Overlay
$surface0   = rgb(49, 50, 68)      # Surface
$surface1   = rgb(69, 71, 90)      # Surface variant
$lavender   = rgb(180, 190, 254)   # Accent primary
$mauve      = rgb(203, 166, 247)   # Accent variant
$sapphire   = rgb(116, 199, 236)   # Accent success
$blue       = rgb(137, 180, 250)   # Info color
$sky        = rgb(137, 220, 235)   # Bright accent
$teal       = rgb(148, 226, 213)   # Success variant
$green      = rgb(166, 227, 161)   # Success
$peach      = rgb(250, 179, 135)   # Warning
$rosewater  = rgb(245, 224, 220)   # Subtle accent
$flamingo   = rgb(242, 205, 205)   # Pink accent
$pink       = rgb(245, 194, 231)   # Pink
$red        = rgb(243, 139, 168)   # Error

# ============================================================================
# GENERAL SETTINGS
# ============================================================================
general {
    no_fade_in           = false
    grace                = 0
    disable_loading_bar  = true
    hide_cursor          = true
    ignore_empty_input   = false
}

# ============================================================================
# BACKGROUND WITH ENHANCED BLUR
# ============================================================================
background {
    monitor              =
    path                 = ~/.config/hypr/background.jpg
    color                = $base
    blur_passes          = 3
    blur_size            = 8
    noise                = 0.015
    contrast             = 1.1
    brightness           = 0.85
    vibrancy             = 0.2
    vibrancy_darkness    = 0.0
}

# ============================================================================
# MAIN TIME DISPLAY
# ============================================================================
label {
    monitor              =
    text                 = cmd[update:1000] echo "<b>$(date +"%H:%M")</b>"
    color                = $text
    font_size            = 130
    font_family          = JetBrains Mono Nerd Font
    position             = 0, 250
    halign               = center
    valign               = center
    shadow_passes        = 2
    shadow_size          = 5
    shadow_color         = rgba(0, 0, 0, 0.5)
}

# ============================================================================
# DATE DISPLAY
# ============================================================================
label {
    monitor              =
    text                 = cmd[update:60000] echo "$(date +"%A, %B %d, %Y")"
    color                = $subtext0
    font_size            = 22
    font_family          = JetBrains Mono Nerd Font
    position             = 0, 130
    halign               = center
    valign               = center
}

# ============================================================================
# PASSWORD INPUT FIELD
# ============================================================================
input-field {
    monitor              =
    size                 = 350, 55
    outline_thickness    = 2
    dots_size            = 0.30
    dots_spacing         = 0.20
    dots_center          = true
    dots_rounding        = -1
    outer_color          = $lavender
    inner_color          = $surface0
    font_color           = $text
    fade_on_empty        = true
    fade_timeout         = 1000
    placeholder_text     = <span foreground="##cdd6f4"><i>󰌾 Enter Password</i></span>
    hide_input           = false
    rounding             = 12
    check_color          = $green
    fail_color           = $red
    fail_text            = <span foreground="##f38ba8"><i>$FAIL</i></span> <span foreground="##f38ba8"><b>($ATTEMPTS)</b></span>
    fail_transition      = 300
    capslock_color       = $peach
    numlock_color        = -1
    bothlock_color       = $peach
    invert_numlock       = false
    swap_font_color      = false
    position             = 0, -120
    halign               = center
    valign               = center
    shadow_passes        = 2
    shadow_size          = 3
    shadow_color         = rgba(0, 0, 0, 0.3)
}

# ============================================================================
# USER GREETING
# ============================================================================
label {
    monitor              =
    text                 = <span foreground="##cba6f7">󰀄</span> Welcome back, <span foreground="##b4befe">$USER</span>
    color                = $text
    font_size            = 20
    font_family          = JetBrains Mono Nerd Font
    position             = 0, -200
    halign               = center
    valign               = center
}

# ============================================================================
# BATTERY STATUS (shows charging/battery level)
# ============================================================================
label {
    monitor              =
    text                 = cmd[update:10000] echo "<span foreground='##a6e3a1'>$(cat /sys/class/power_supply/BAT*/capacity 2>/dev/null || echo '')$([ -f /sys/class/power_supply/BAT*/capacity ] && echo '%' || echo '')</span>"
    color                = $green
    font_size            = 16
    font_family          = JetBrains Mono Nerd Font
    position             = -30, -30
    halign               = right
    valign               = top
}

# ============================================================================
# CURRENT WEATHER (requires curl access)
# ============================================================================
label {
    monitor              =
    text                 = cmd[update:1800000] echo "<span foreground='##89dceb'>󰖐</span>"
    color                = $sky
    font_size            = 16
    font_family          = JetBrains Mono Nerd Font
    position             = 30, -30
    halign               = left
    valign               = top
}

# ============================================================================
# CAPS LOCK INDICATOR
# ============================================================================
label {
    monitor              =
    text                 = cmd[update:500] ~/.config/hypr/scripts/capslock.sh
    color                = $peach
    font_size            = 14
    font_family          = JetBrains Mono Nerd Font
    position             = 0, 30
    halign               = center
    valign               = bottom
}

# ============================================================================
# DECORATIVE RING AROUND INPUT
# ============================================================================
shape {
    monitor              =
    size                 = 380, 85
    color                = rgba(180, 190, 254, 0.1)
    rounding             = 15
    border_size          = 0
    border_color         = $lavender
    rotate               = 0
    position             = 0, -120
    halign               = center
    valign               = center
}

# ============================================================================
# BOTTOM ACCENT LINE
# ============================================================================
shape {
    monitor              =
    size                 = 400, 3
    color                = $lavender
    rounding             = 2
    border_size          = 0
    rotate               = 0
    position             = 0, 80
    halign               = center
    valign               = bottom
}
